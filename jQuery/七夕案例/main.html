<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <title>七夕情缘</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/pageA.css">
    <link rel="stylesheet" type="text/css" href="css/pageB.css">
    <link rel="stylesheet" type="text/css" href="css/pageC.css">

    <script src="js/jquery-1.12.1.min.js"></script>
    <script src="js/jquery.transit.js"></script>
    <style type="text/css">
   
    </style>
</head>
<body>
    <div id="content">
        <ul class="content-wrap">
            <!-- 第一幅画面 -->
            <li>
                <div class="a_background">
                    <div class="a_background_top"></div>
                    <div class="a_background_middle"></div>
                    <div class="a_background_botton"></div>
                </div>
                <!-- 云区 -->
                <div class="Cloudarea">
                    <div class="Cloud"></div>
                    <div class="Cloud"></div>
                </div>
                <!-- 太阳 -->
                <div id="sun"></div>
            </li>
            <!-- 第二幅画面 -->
            <li>
            <!-- 背景图 -->
              <div class="b_background"></div>
              <div class="b_background_preload"></div>
              <!-- 商店 -->
                <div class="shop">
                <!-- 门 -->
                    <div class="door">
                        <!-- 两个门板 -->
                        <div class="door-left"></div>
                        <div class="door-right"></div>
                    </div>
                    <!-- 灯 -->
                    <div class="lamp"></div>
                </div>
                <!--鸟-->
                <div class="bird"></div>
            </li>
            <!-- 第三幅画面 -->
            <li>
                <div class="c_background">
                    <div class="c_background_top"></div>
                    <div class="c_background_middle"></div>
                    <div class="c_background_botton"></div>
                </div>
                <!-- 小女孩 -->
                <div class="girl"></div>
                <!-- 水波 -->
                <div class="bridge-bottom">
                    <div class="water">
                        <div id="water1" class="water_1"></div>
                        <div id="water2" class="water_2"></div>
                        <div id="water3" class="water_3"></div>
                        <div id="water4" class="water_4"></div>
                    </div>
                </div>
                    <!-- 星星 -->
                    <ul class="stras">
                        <li class="stras1"></li>
                        <li class="stras2"></li>
                        <li class="stras3"></li>
                        <li class="stras4"></li>
                        <li class="stras5"></li>
                        <li class="stras6"></li>
                    </ul>
                    <!-- logo图 -->
                  <div class="logo"></div>  
            </li>
        </ul>
           <!-- 飘花 -->
        <div id="snowflake"></div>
        <div id="boy" class="charector"></div>
     </div>

    <script type="text/javascript">
    $(function(){
        //////////
        // 小孩走路 //
        //////////
        var boy = BoyWalk();

        boy.talkFlower();

        // 音乐配置
        var audioconfig = {
            enable: true, // 是否开启音乐
            playurl: 'music/happy.wav', // 正常播放地址
            cycleURL: 'music/circulation.wav' // 正常循环播放地址
        };

        /////////
        //背景音乐 //
        /////////
        function hmlt5audio(url, isloop) {
            var audio = new Audio(url);
            audio.autoplay = true;
            audio.loop = isloop || false;
            audio.play();
            return {
                end: function(callback) {
                    audio.addEventListener('ended', function() {
                        callback();
                    }, false);
                }
            };
        }


        var snowflakeurl = [
        'img/snowflake1.png',
        'img/snowflake2.png',
        'img/snowflake3.png',
        'img/snowflake4.png',
        'img/snowflake5.png',
        'img/snowflake6.png'
        ]
        ////////////////
        /////飘雪花/////
        ////////////////
        function snowFlake() {
            // 雪花容器
            var $flakecontainer = $('#snowflake');
            //随机六张图
            function getimagesname() {
                return snowflakeurl[[Math.floor(Math.random() * 6)]];
            }
            //创建一个雪花元素
            function createsnowbox() {
                var url = getimagesname();
                return $('<div class="snowbox" />').css({
                    'width' : 41,
                    'height' : 41,
                    'position' : 'absolute',
                    'backgroundsize' : 'cover',
                    'zindex' : 100000,
                    'top' : '-41px',
                    'backgroundimage' : 'url('+ url +')'
                }).addClass('snowroll')
            }
            //开始飘花
            setInterval(function(){
                //运动轨迹
                var startpositionleft = Math.random() * visualwidth - 100,
                startopactiy = 1,
                endpositiontop = visualheight - 40,
                endpositiontleft = startpositionleft - 100 + Math.random() * 500,
                duration = visualheight * 10 + Math.random() * 5000;
            //随机透明度，不小于0.5
            var randomstart = Math.random();
            randomstart = randomstart < 0.5 ? startopactiy : randomstart;
            //创建一个雪花
            var $flake = createsnowbox();
            //设计起点位置
            $flake.css({
                left : startpositionleft,
                opacity : randomstart
            });
            //加入容器
            $flakecontainer.append($flake);
            //开始执行动画
            $flake.transition({
                top : endpositiontop,
                left : endpositiontleft,
                opacity : 0.7
            },duration, 'ease-out', function(){
                $(this).remove()//结束后删除
            });
        }, 200);
    }

        // 开始
        $("button").click(function() {
            var audio1 = hmlt5audio(audioconfig.playurl);
            audio1.end(function() {
                hmlt5audio(audioconfig.cycleURL, true);
            });
            snowFlake();
        });
    });
    </script>
</body>
<script src="js/swipe.js"></script>
<script src="js/QiXi.js"></script>
</html>
<!-- 做7-1 -->
